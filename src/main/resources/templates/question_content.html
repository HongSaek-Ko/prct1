<!DOCTYPE html>
<html layout:decorate="~{layout}">
  <!-- 전체를 하나의 container로 묶음, 세로 간격 3 -->
  <div layout:fragment="content" class="container my-3">
    <!-- 질문 제목, 밑줄 및 세로 들여쓰기 2 -->
    <h2 class="border-bottom py-2" th:text="${question.subject}"></h2>
    <!-- card 컴포넌트: 세로 간격 3-->
    <div class="card my-3">
      <!-- card body 시작 -->
      <div class="card-body">
        <!-- 질문 제목 -->
        <div
          class="card-text"
          style="white-space: pre-line"
          th:text="${question.content}"
        ></div>
        <!-- content 컴포넌트: 우측 정렬 -->
        <div class="d-flex justify-content-end">
          <!-- badge 컴포넌트: 배경 하양, 글씨 검정, 들여쓰기 2, 좌측 정렬-->
          <div class="badge bg-light text-dark p-2 text-start">
            <!-- 작성일자. %y-%m-%d hh:mm:ss 형식 -->
            <div
              th:text="${#temporals.format(question.createDate, 'yyyy-MM-dd HH:mm')}"
            ></div>
          </div>
          <!-- badge 컴포넌트 끝 -->
        </div>
        <!-- content 컴포넌트 끝 -->
      </div>
      <!-- card body 끝 -->
    </div>
    <!-- card 컴포넌트 끝 -->

    <!-- 답변 수 -->
    <!-- #lists.size(이터러블 객체) - thymeleaf의 유틸리티. 객체의 길이 반환 -->
    <h5
      class="border-bottom my-3 py-2"
      th:text="|${#lists.size(question.answerList)}개의 답변이 있습니다.|"
    ></h5>
    <!-- 답변 목록 -->
    <div class="card my-3" th:each="answer : ${question.answerList}">
      <div class="card-body">
        <div
          class="card-text"
          style="white-space: pre-line"
          th:text="${answer.content}"
        >
          <div class="d-flex justify-content-end">
            <div class="badge bg-light text-dark p-2 text-start">
              <div
                th:text="${#temporals.format(answer.createDate, 'yyyy-MM-dd HH:mm:ss')}"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 답변 작성 폼. th:action 태그로 작성. 문자열-객체 연결 시 | 표기 필수. -->
    <form
      class="my-3"
      th:action="@{|answer/regist/${question.id}|}"
      th:object="${answerForm}"
      method="post"
    >
      <div th:replace="form_errors :: formErrorsFragment"></div>
      <!-- 에러 메시지 시작. 에러 발생 시에만 표시 -->
      <!-- <div
        class="alert alert-danger"
        role="alert"
        th:if="${#fields.hasAnyErrors()}"
      >
        <div th:each="err : ${#fields.allErrors()}" th:text="${err}"></div>
      </div> -->
      <!-- 에러 메시지 끝 -->
      <!-- 작성 범위. name={컬럼명}. rows=박스 크기 설정값. -->
      <textarea
        class="form-control"
        th:field="*{content}"
        id="content"
        rows="15"
      ></textarea>
      <!-- '답변등록' 클릭 시 POST 방식으로 제출(submit)됨 -->
      <input class="btn btn-primary my-2" type="submit" value="답변등록" />
    </form>
  </div>
  <!-- container 끝 -->
</html>
